/**
  ******************************************************************************
  * @file    delay.c
  * @author  
  * @version 
  * @date    
  * @brief   延时bsp配置文件
  ******************************************************************************
  * @attention
  *
  *  
  * 
  * 
  *
  ******************************************************************************
  */

#include	"delay.h"


/**
  * @brief  us延时函数
  * @param  i		延时i微秒
  * @retval none
  */
void delay_us(u32 i)
{
    u32 temp;
    SysTick->LOAD = 9*i;         //设置重装数值, 72MHZ时
    SysTick->CTRL = 0X01;         //使能，减到零是无动作，采用外部时钟源
    SysTick->VAL = 0;                //清零计数器
    do
    {
        temp = SysTick->CTRL;           //读取当前倒计数值
    }
    while((temp & 0x01) && (!(temp & (1 << 16))));     //等待时间到达
    SysTick->CTRL = 0;    //关闭计数器
    SysTick->VAL = 0;        //清空计数器
}


/**
  * @brief  ms延时函数
  * @param  i		延时i毫秒
  * @retval none
  */
void delay_ms(u32 i)
{
    u32 temp;
    SysTick->LOAD = 9000*i;      //设置重装数值, 72MHZ时
    SysTick->CTRL = 0X01;        //使能，减到零是无动作，采用外部时钟源
    SysTick->VAL = 0;            //清零计数器
    do
    {
        temp = SysTick->CTRL;       //读取当前倒计数值
    }
    while((temp & 0x01) && (!(temp & (1 << 16))));    //等待时间到达
    SysTick->CTRL = 0;    //关闭计数器
    SysTick->VAL = 0;        //清空计数器
}
